# 요구사항 문서

## 소개

이 기능은 AI 어시스턴트의 기능을 확장하여 Gemini API를 통한 자연어 상호작용으로 TODO 항목을 생성하고 업데이트할 수 있도록 합니다. 현재 AI 어시스턴트는 TODO 항목을 읽기만 할 수 있습니다. 이 개선 사항을 통해 사용자는 대화형 명령을 통해 새로운 TODO를 생성하고 기존 TODO를 업데이트할 수 있으며, 삭제 작업을 방지하는 엄격한 보안 제어를 유지합니다.

## 용어집

- **AI Assistant**: 사용자가 자연어를 통해 TODO 항목을 관리할 수 있도록 돕는 Gemini 기반 대화형 인터페이스
- **Function Call**: AI가 백엔드 함수를 호출하여 작업을 수행할 수 있도록 하는 Gemini API 메커니즘
- **TODO Item**: 내용, 날짜, 메모, 완료 상태 및 파일 첨부를 포함한 속성을 가진 데이터베이스에 저장된 작업 엔티티
- **Soft Delete**: 데이터베이스에서 물리적으로 제거하지 않고 `del_yn` 플래그를 사용하여 항목을 삭제된 것으로 표시하는 삭제 패턴
- **System Prompt**: AI 어시스턴트의 동작, 기능 및 제한 사항을 정의하는 지시 텍스트

## 요구사항

### 요구사항 1

**사용자 스토리:** 사용자로서, AI 어시스턴트와의 자연어 대화를 통해 새로운 TODO 항목을 생성하고 싶습니다. 그래야 양식을 탐색하지 않고도 빠르게 작업을 추가할 수 있습니다.

#### 수락 기준

1. 사용자가 자연어로 TODO 항목 생성을 요청하면, AI Assistant는 추출된 작업 세부 정보로 createTodo 함수를 호출해야 합니다
2. AI Assistant는 사용자의 자연어 입력에서 TODO 내용, 날짜 및 선택적 메모를 추출해야 합니다
3. createTodo 함수가 성공적으로 실행되면, AI Assistant는 할당된 TODO ID를 포함하여 사용자에게 생성을 확인해야 합니다
4. 사용자의 요청에 필수 정보(TODO 내용)가 부족한 경우, AI Assistant는 TODO를 생성하기 전에 명확한 질문을 해야 합니다
5. AI Assistant는 사용자 입력에 따라 미래 날짜, 과거 날짜 또는 오늘 날짜로 TODO 생성을 지원해야 합니다

### 요구사항 2

**사용자 스토리:** 사용자로서, AI 어시스턴트와의 자연어 대화를 통해 기존 TODO 항목을 업데이트하고 싶습니다. 그래야 수동 양식 편집 없이 작업 세부 정보를 수정하거나, 항목을 완료로 표시하거나, 메모를 추가할 수 있습니다.

#### 수락 기준

1. 사용자가 TODO 항목을 참조하여(ID, 내용 또는 컨텍스트로) 업데이트를 요청하면, AI Assistant는 TODO 식별자와 업데이트된 필드로 updateTodo 함수를 호출해야 합니다
2. AI Assistant는 내용, 완료 상태 또는 메모를 독립적으로 수정할 수 있는 부분 업데이트를 지원해야 합니다
3. TODO를 완료로 표시할 때, AI Assistant는 completeDtm 필드를 현재 타임스탬프로 설정해야 합니다
4. TODO를 미완료로 표시할 때, AI Assistant는 completeDtm 필드를 null로 설정해야 합니다
5. 사용자가 고유하게 식별할 수 없는 TODO를 참조하는 경우, AI Assistant는 업데이트를 진행하기 전에 명확한 설명을 요청해야 합니다

### 요구사항 3

**사용자 스토리:** 시스템 관리자로서, AI 어시스턴트를 통한 TODO 삭제가 완전히 차단되기를 원합니다. 그래야 사용자가 대화형 명령을 통해 실수로 또는 의도적으로 데이터를 삭제할 수 없습니다.

#### 수락 기준

1. 사용자가 TODO 항목을 삭제하거나 제거하도록 요청하면, AI Assistant는 명시적으로 요청을 거부하고 삭제가 지원되지 않음을 사용자에게 알려야 합니다
2. 사용자가 del_yn 필드를 직접 수정하도록 요청하면, AI Assistant는 명시적으로 요청을 거부하고 이 작업이 허용되지 않음을 사용자에게 알려야 합니다
3. System Prompt에는 삭제 작업을 금지하는 명시적인 지시사항이 포함되어야 합니다
4. AI Assistant는 Gemini API 구성에서 삭제 함수 선언에 액세스할 수 없어야 합니다
5. 사용자가 대체 표현을 사용하여 삭제 요청을 계속하는 경우, AI Assistant는 일관되게 거부하고 지원되는 작업(생성, 읽기, 업데이트)으로 리디렉션해야 합니다

### 요구사항 4

**사용자 스토리:** 개발자로서, 생성 및 업데이트 작업에 대한 Gemini 함수 호출 스키마가 적절하게 정의되기를 원합니다. 그래야 AI가 올바른 매개변수로 백엔드 API를 안정적으로 호출할 수 있습니다.

#### 수락 기준

1. createTodo 함수 선언은 todoContent 및 todoDate에 대한 필수 매개변수를 정의해야 합니다
2. createTodo 함수 선언은 todoNote에 대한 선택적 매개변수를 정의해야 합니다
3. updateTodo 함수 선언은 대상 TODO를 식별하기 위한 todoSeq에 대한 필수 매개변수를 정의해야 합니다
4. updateTodo 함수 선언은 todoContent, completeDtm 및 todoNote에 대한 선택적 매개변수를 정의해야 합니다
5. 함수 선언에는 AI가 자연어에서 매개변수를 추출하는 데 도움이 되는 명확한 설명이 포함되어야 합니다

### 요구사항 5

**사용자 스토리:** 사용자로서, 생성 및 업데이트 작업 후 AI 어시스턴트가 유용한 피드백을 제공하기를 원합니다. 그래야 내 작업이 성공했는지 확인하고 무엇이 변경되었는지 이해할 수 있습니다.

#### 수락 기준

1. TODO가 성공적으로 생성되면, AI Assistant는 TODO 내용과 할당된 날짜를 포함한 확인 메시지로 응답해야 합니다
2. TODO가 성공적으로 업데이트되면, AI Assistant는 변경된 내용을 설명하는 확인 메시지로 응답해야 합니다
3. 생성 또는 업데이트 작업이 실패하면, AI Assistant는 사용자 친화적인 언어로 오류를 설명해야 합니다
4. AI Assistant는 최근에 생성되거나 업데이트된 TODO에 대한 후속 작업을 허용하기 위해 대화 컨텍스트를 유지해야 합니다
5. 여러 TODO가 업데이트 요청과 일치하는 경우, AI Assistant는 일치하는 항목을 나열하고 사용자에게 업데이트할 항목을 지정하도록 요청해야 합니다
