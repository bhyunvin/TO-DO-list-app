# 구현 계획: 테마 토글을 포함한 다크 모드

- [ ] 1. 지속성을 갖춘 Zustand 테마 스토어 생성
  - 테마 상태 관리를 위한 `client/src/stores/themeStore.js` 생성
  - `toggleTheme()`, `setTheme()`, `initializeTheme()` 함수 구현
  - localStorage를 사용한 Zustand persist 미들웨어 구성
  - `window.matchMedia`를 사용한 시스템 선호도 감지 추가
  - document 요소에 `data-theme` 속성 업데이트 구현
  - _요구사항: 4.1, 4.2, 5.1, 5.2, 5.3, 5.4, 5.5, 6.5_

- [ ] 2. 테마 적용을 위한 전역 CSS Custom Properties 정의
  - [ ] 2.1 `client/src/index.css`에 라이트 테마 CSS 변수 생성
    - 배경, 텍스트, 테두리, 그림자에 대한 색상 변수 정의
    - 기본 라이트 테마 값 설정
    - 테마 변경을 위한 부드러운 전환 속성 추가
    - _요구사항: 2.1, 2.2, 2.4_
  
  - [ ] 2.2 `[data-theme='dark']` 선택자로 다크 테마 CSS 변수 생성
    - 적절한 대비율을 갖춘 다크 테마 색상 팔레트 정의
    - 모든 텍스트 색상에 대해 WCAG 2.1 Level AA 준수 보장
    - 다크 테마 그림자 값 추가
    - _요구사항: 2.1, 2.3, 2.4, 6.4_
  
  - [ ] 2.3 모션 감소 지원 추가
    - `@media (prefers-reduced-motion: reduce)` 쿼리 구현
    - 접근성을 위한 전환 지속 시간 감소
    - _요구사항: 6.1_

- [ ] 3. ThemeToggle 컴포넌트 생성
  - [ ] 3.1 React Bootstrap 스위치로 ThemeToggle 컴포넌트 구현
    - `client/src/components/ThemeToggle.js` 생성
    - 스위치 변형과 함께 `Form.Check` 사용
    - Zustand 테마 스토어에 연결
    - "다크 모드" 레이블 추가
    - 이벤트 전파 방지와 함께 클릭 핸들러 구현
    - _요구사항: 1.3, 1.4, 5.2, 5.3_
  
  - [ ] 3.2 ThemeToggle 스타일 추가
    - `client/src/components/ThemeToggle.css` 생성
    - 드롭다운 메뉴 항목과 일치하도록 토글 컨테이너 스타일 지정
    - 호버 및 포커스 상태 추가
    - 적절한 간격 및 정렬 보장
    - _요구사항: 1.3, 6.2, 6.3_

- [ ] 4. App 컴포넌트에서 테마 초기화
  - 마운트 시 `initializeTheme()` 호출하도록 `client/src/App.js` 수정
  - 테마 초기화를 위한 `useEffect` 훅 추가
  - `useThemeStore` 가져오기 및 사용
  - _요구사항: 4.2, 5.5_

- [ ] 5. 프로필 드롭다운에 ThemeToggle 통합
  - `client/src/todoList/TodoList.js` 수정
  - ThemeToggle 컴포넌트 가져오기
  - "비밀번호 변경"과 "로그아웃" 메뉴 항목 사이에 ThemeToggle 추가
  - 시각적 구분을 위한 드롭다운 구분선 추가
  - 토글 클릭 시 드롭다운이 열린 상태로 유지되도록 보장
  - _요구사항: 1.1, 1.2, 1.5_

- [ ] 6. CSS 변수를 사용하도록 TodoList.css 리팩토링
  - [ ] 6.1 하드코딩된 색상을 CSS 변수 참조로 교체
    - CSS 변수를 사용하도록 모든 색상 값 업데이트
    - 기존 CSS 변수를 새로운 전역 테마 변수에 매핑
    - 배경색, 텍스트 색상, 테두리 색상 업데이트
    - _요구사항: 2.4, 3.1, 3.2_
  
  - [ ] 6.2 호버 및 포커스 상태 업데이트
    - 호버 상태가 테마 인식 색상을 사용하도록 보장
    - 테마 변수를 사용하도록 포커스 표시기 업데이트
    - 두 테마 모두에서 가시성 테스트
    - _요구사항: 3.5, 6.4_

- [ ] 7. CSS 변수를 사용하도록 LoginForm.css 리팩토링
  - `client/src/loginForm/LoginForm.css` 업데이트
  - 하드코딩된 색상을 CSS 변수 참조로 교체
  - 컨테이너 배경, 테두리, 텍스트 색상 업데이트
  - 폼 입력이 테마 인식 색상을 사용하도록 보장
  - _요구사항: 2.4, 3.1_

- [ ] 8. CSS 변수를 사용하도록 ChatModal.css 리팩토링
  - `client/src/components/ChatModal.css` 업데이트
  - 하드코딩된 색상을 CSS 변수 참조로 교체
  - 사용자 및 어시스턴트를 위한 채팅 메시지 배경 업데이트
  - 모달 배경 및 텍스트 색상 업데이트
  - 두 테마 모두에서 적절한 대비 보장
  - _요구사항: 2.4, 3.3_

- [ ] 9. 다크 테마를 위한 Bootstrap 컴포넌트 오버라이드 추가
  - [ ] 9.1 `client/src/App.css`에 다크 테마 오버라이드 생성
    - 다크 테마를 위한 Bootstrap 버튼 스타일 오버라이드
    - 폼 컨트롤 스타일 오버라이드 (입력, 텍스트 영역, 선택)
    - 모달 스타일 오버라이드
    - 드롭다운 메뉴 스타일 오버라이드
    - 테이블 스타일 오버라이드
    - _요구사항: 2.4, 3.2_
  
  - [ ] 9.2 다크 테마에서 모든 Bootstrap 컴포넌트 테스트
    - 버튼이 올바르게 렌더링되는지 확인
    - 폼 컨트롤이 읽기 가능한지 확인
    - 모달이 적절한 배경을 갖는지 확인
    - 드롭다운이 테마와 일치하는지 확인
    - _요구사항: 3.2, 3.4_

- [ ] 10. 나머지 컴포넌트 스타일 업데이트
  - [ ] 10.1 PasswordChangeForm 스타일 업데이트
    - 인라인 스타일이 있는 경우 `client/src/components/PasswordChangeForm.js` 수정
    - 폼이 테마 인식 색상을 사용하도록 보장
    - _요구사항: 3.2_
  
  - [ ] 10.2 ProfileUpdateForm 스타일 업데이트
    - 인라인 스타일이 있는 경우 `client/src/components/ProfileUpdateForm.js` 수정
    - 폼이 테마 인식 색상을 사용하도록 보장
    - _요구사항: 3.2_
  
  - [ ] 10.3 FloatingActionButton 스타일 업데이트
    - `client/src/components/FloatingActionButton.css` 업데이트
    - 버튼 색상이 두 테마 모두에서 작동하도록 보장
    - 기존 색상 스킴 유지 또는 테마에 적응
    - _요구사항: 3.2_
  
  - [ ] 10.4 FileUploadProgress 스타일 업데이트
    - 인라인 스타일이 있는 경우 `client/src/components/FileUploadProgress.js` 수정
    - 진행률 표시기가 두 테마 모두에서 표시되도록 보장
    - _요구사항: 3.2_

- [ ] 11. 모든 페이지에서 테마 일관성 확인
  - 로그인 페이지에서 테마 적용 테스트
  - 회원가입 페이지에서 테마 적용 테스트
  - todo 리스트 페이지에서 테마 적용 테스트
  - 모든 모달 및 드롭다운에서 테마 적용 테스트
  - 테마 간 부드러운 전환 확인
  - _요구사항: 3.1, 3.2, 3.3, 3.4, 3.5, 6.1_

- [ ] 12. 테마 지속성 기능 확인
  - 페이지 새로고침 후 테마 유지 테스트
  - 로그아웃 및 로그인 후 테마 유지 테스트
  - 브라우저 탭 간 테마 유지 테스트
  - 선호도가 없을 때 기본 테마 테스트
  - 시스템 선호도 감지 테스트
  - _요구사항: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 13. 접근성 준수 확인
  - 테마 토글에 대한 키보드 탐색 테스트
  - 스크린 리더 알림 테스트
  - 두 테마 모두에서 포커스 표시기 확인
  - 색상 대비율이 WCAG AA 기준을 충족하는지 확인
  - 모션 감소 선호도로 테스트
  - _요구사항: 6.1, 6.2, 6.3, 6.4, 6.5_

- [ ] 14. 테마 스토어에 대한 단위 테스트 작성
  - `client/src/stores/themeStore.test.js` 생성
  - 초기 테마 상태 테스트
  - `toggleTheme()` 기능 테스트
  - `setTheme()` 기능 테스트
  - localStorage에 지속성 테스트
  - localStorage에서 테마 복원 테스트
  - 시스템 선호도 감지 테스트
  - _요구사항: 5.1, 5.2, 5.3, 5.4, 5.5_

- [ ] 15. ThemeToggle 컴포넌트에 대한 단위 테스트 작성
  - `client/src/components/ThemeToggle.test.js` 생성
  - 컴포넌트가 올바른 레이블로 렌더링되는지 테스트
  - 스위치가 현재 테마 상태를 반영하는지 테스트
  - 토글 클릭 시 `toggleTheme()` 호출 테스트
  - 클릭 이벤트가 전파되지 않는지 테스트
  - 키보드 접근성 테스트
  - _요구사항: 1.3, 1.4, 1.5, 6.2, 6.3_
